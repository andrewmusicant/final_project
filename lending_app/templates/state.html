{% extends 'base.html' %}

{% block body %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<div id="table_div"></div>
<script type="text/javascript">


google.charts.load('current', {'packages':['table']});
google.charts.setOnLoadCallback(drawTable);

google.charts.load('current', {
  'packages': ['table']
});
google.charts.setOnLoadCallback(drawTable);

function drawTable() {
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Name');
  data.addColumn('number', 'Total Assets');
  data.addColumn('number', 'Individual Loan Percentage');
  data.addColumn('number', 'Ranked Score');
  data.addRows([
  {% for bank in banks %}

          ['<a href="{% url "lending:bank_detail" bank.id %}">{{ bank.name }}</a>',
          {{ bank.total_assets }},
          {{ bank.individual_loan_percentage }},
          {{ bank.score|floatformat:2 }}],
      {% endfor %}
]);
  var table = new google.visualization.Table(document.getElementById('table_div'));

  table.draw(data, {
    showRowNumber: true,
    width: '65%',
    height: '100%',
    allowHtml: true
  });
}


</script>
{% endblock %}
